<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.3.1/lib/p5.js"></script>
    <!--<script src="sketch.js"></script>-->
    <link rel="stylesheet" href="style.css" />
    <title>random walks</title>
  </head>
  <body>
    <div id="main-wrapper">
      <h1>
        random walks - from drunk walking <br />
        to predicting baseball games
      </h1>

      <p class="normal-text">
        A random walk describes the process of a stochastic succession of
        numbers through N genearations. For each generation, the number takes a
        “step” of value r, defined by a random algorithm. That value could be
        fixed for any “direction” or it could be weighted (biased towards right
        or left, in a 1-dimensional number line). This process can be applied in
        n dimensions, but most visualizations stick to 2D or 3D.
      </p>
      <p class="normal-text">
        Here I will present you some interactive plots, animations and a cool
        case study, showing the distribution, beauty and behavior of a simple
        random walker. Let’s start off looking at the distribution of our walker
        through a 1D space, after N generations, with a step size of r, and no
        bias, using a uniform pseudorandom number generator with the help of
        p5.js’s random() function. We will then move on to seeing some
        beautiful, creative ways of visualizing the walker in a 2D space using
        p5.js.
      </p>
      <p class="normal-text">
        Later on, we’ll also explore other random generators, such as p5’s noise
        function, that uses Perlin noise, and how the walker behaves with
        resampling techniques, such as Monte Carlo simulations. At the end, we
        will see how can we predict the outcome of some baseball games for a
        fairly average fictional team, and we will also discuss how can we use
        random walks to guess if a process is mostly random or not.
      </p>
      <p class="normal-text">
        Every plot in this page is interactive. Every plot and drawing can be
        controlled by a set of parameters in the boxes above them. Try them out
        and see how different sets of values control the behavior of our little
        walker fellow!
      </p>
      <p class="normal-text">So, let’s get started!</p>

      <h2>a truly <em>random</em> walker</h2>

      <p class="normal-text">
        In the following examples, we will see how a 1-dimensional random walker
        behhaves after N generations, with an unhbiased step size of r, where
        the direction of r is defined by a uniform random distribution. Here I
        will let you define the values for N and r, so get to exploring!
      </p>
      <p class="normal-text">
        P.S.: by “direction” I mean if the step r is going to be a negative
        value (to the “left” of the number line) or a positive value (to the
        “right” of the line).
      </p>
      <p class="normal-text">
        The plot below is a line chart that shows the total “distance” d (the
        sum of the values of the steps) the walker has travelled. Note that,
        since some steps may be negative values - as we are thinking about going
        forward (+r) or backwards (-r) on a 1D number line - d can be a negative
        value.
      </p>

      <div class="input-wrapper">
        <!-- Use JS to restrict the max possible number -->
        <!-- https://stackoverflow.com/questions/9361193/why-is-input-type-number-maxlength-3-not-working-in-safari -->
        <!-- https://stackoverflow.com/a/8355013 -->
        <div class="input-group">
          <label for="chart-1-n">N:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-1-n"
            min="0"
            max="99999"
            value="50"
            onchange=""
          />
        </div>

        <div class="input-group">
          <label for="chart-1-r">r:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-1-r"
            min="0"
            max="99"
            value="1"
            onchange=""
          />
        </div>
      </div>

      <button class="simulate-button" onclick="">simulate</button>

      <canvas id="chart-1" class="chart"></canvas>

      <p class="normal-text">
        Yes, this plot is nice and all, but it is a bit boring. We’re gonna
        spice some things up now! First of all, do you wonder how many beautiful
        images could we come up with just by using this simple process of
        describing random events? No? Well, let me help you with that. Here is a
        simple example of how can we visualize our walker. For this, we’re gonna
        use a 2D walker instead of 1D - since 1D walkers are pretty lame for
        creative visualizations.
      </p>

      <button class="simulate-button" onclick="">simulate</button>

      <div id="simulation-1" class="p5-simulation"></div>

      <p class="normal-text">
        Wanna know how that was made? Well, our walker friend here is a line,
        connecting two points each with an x an y position in this 2D canvas. We
        iterate N times (which is 100,000 here) and, for each iteration,
        generate separate “step” values for x and y that are either -5 or 5,
        with equal probabilities. We then connect the point in the walker’s
        previous x and y positions to the new one and voilá! The colors are
        mapped to the walker’s position on the canvas, just to add a touch of
        rainbowness.
      </p>
      <p class="normal-text">Now, let’s see how our walker... well, walks!</p>

      <button class="reset-button" onclick="">reset</button>

      <div id="simulation-2" class="p5-simulation"></div>

      <h2>a <em>noisy</em> walker</h2>

      <p class="normal-text">
        We can use different random algorithms to control the behavior of our
        walker. For example, instead of using a uniform random distribution, we
        could use something like Perlin noise, which generates smooter random
        values. The issue here is: how do we map the generated values to our 1D
        walker’s “direction”. One simple approach is to take the value generated
        by p5.js’ noise() and use p5.js’ map() to smartly convert it to a number
        between -1 and 1. The issue here is that we we’ll generate a floating
        point number that is... well, between -1 and 1, and not either or.
      </p>
      <p class="normal-text">
        Anoter - arguably dumber - approach, which we are gonna use here, is to
        instead use the generated number as a thresshold value. So, in our
        example, if the noise algorithm generates a number <= 0.5, the walker
        goes backwards; otherwise, it goes forward.
      </p>
      <p class="normal-text">
        Try fiddling with the numbers! They do the same as in the previous
        iteration.
      </p>

      <div class="input-wrapper">
        <!-- Use JS to restrict the max possible number -->
        <!-- https://stackoverflow.com/questions/9361193/why-is-input-type-number-maxlength-3-not-working-in-safari -->
        <!-- https://stackoverflow.com/a/8355013 -->
        <div class="input-group">
          <label for="chart-2-n">N:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-2-n"
            min="0"
            max="99999"
            value="50"
            onchange=""
          />
        </div>

        <div class="input-group">
          <label for="chart-2-r">r:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-2-r"
            min="0"
            max="99"
            value="1"
            onchange=""
          />
        </div>
      </div>

      <button class="simulate-button" onclick="">simulate</button>

      <canvas id="chart-2" class="chart"></canvas>

      <p class="normal-text">
        Ok, that’s cool and all, but what about the creative visualizations? For
        this one, it is a bit more interesting. You see, since Perlin noise
        generates smooth random values, more often than not, our walker is goona
        take a large sequence of steps in the same direction. Once again, let’s
        visualize the walker in 2D, since a 1D walker is pretty lame. This time,
        let’s try it with points instead of lines, and see what we’ve got!
      </p>

      <button class="reset-button" onclick="">reset</button>

      <div id="simulation-3" class="p5-simulation"></div>

      <p class="normal-text">
        Pretty interesting, right? You see that our walker walks a lot in one
        direction before taking some very smooth turns, which is expected since
        we’re using Perlin noise to control its movements. It will be easier to
        spot this trend in the animated version below, but the graph should have
        given you a good idea.
      </p>

      <button class="reset-button" onclick="">reset</button>

      <div id="simulation-4" class="p5-simulation"></div>

      <h2>what about... <em>more</em> walkers?</h2>

      <p class="normal-text">
        All we’ve done so far is working with one random walker in a 1D or 2D
        space. For our creative visualizations, this is more than fine. Many
        walkers at the same time can create some very cluttered monstrosities if
        we’re not careful (but we’re not, so we’re gonna do it anyways). You
        know what is it not fine for? Visualizing trends and distribution. A
        lone walker doesn’t tell us much about the trends in this beautiful
        stochastic system. We need many replicates if we want to understand the
        mechanism behind this phenomenom.
      </p>
      <p class="normal-text">
        This time around, I’ll let you take a bit more control over our graph.
        You’ll again be able to choose the values for N and r and, alongside
        that, you’ll also control w, the number of walkers (or replicates), and
        what random algorithm to use (random, for an uniform distribution, or
        noise, for Perlin noise)!
      </p>

      <div class="input-wrapper">
        <!-- Use JS to restrict the max possible number -->
        <!-- https://stackoverflow.com/questions/9361193/why-is-input-type-number-maxlength-3-not-working-in-safari -->
        <!-- https://stackoverflow.com/a/8355013 -->
        <div class="input-group">
          <label for="chart-3-n">N:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-3-n"
            min="0"
            max="99999"
            value="50"
            onchange=""
          />
        </div>

        <div class="input-group">
          <label for="chart-3-r">r:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-3-r"
            min="0"
            max="99"
            value="1"
            onchange=""
          />
        </div>

        <div class="input-group">
          <label for="chart-3-w">w:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-3-w"
            min="1"
            max="999"
            value="10"
            onchange=""
          />
        </div>
      </div>

      <div class="input-wrapper">
        <div class="input-group">
          <label for="chart-3-random">random:</label>
          <input
            type="radio"
            id="chart-3-random"
            class="walker-algorithm"
            name="walker-algorithm"
            value="random"
            onclick=""
          />
        </div>

        <div class="input-group">
          <label for="chart-3-noise">noise:</label>
          <input
            type="radio"
            id="chart-3-noise"
            class="walker-algorithm"
            name="walker-algorithm"
            value="noise"
            onclick=""
          />
        </div>
      </div>

      <button class="simulate-button" onclick="">simulate</button>

      <canvas id="chart-3" class="chart"></canvas>

      <p class="normal-text">
        Nice! With that many walkers, we can see how the different random
        algorithms behave, and understand the random nature of the process. You
        know what else we can do? Predict! With a rather simple mathematical
        approach, we can predict the total travelled distance, d, by using the
        total number of steps, N. Here’s the formula:
      </p>

      <span class="formula">d = sqrt(N)</span>

      <p class="normal-text">
        Do note, though, that this is only true when we’re talking about a
        uniform random walker, so it’s not gonna work for our noise walker. Two
        other things must be taken in consideration: first, this formula
        describes the behavior of a 1D walker, although it can be applied (with
        adjustments) to many dimensions; and second, it assumes a step size of
        1. That second consideration can easily be circumvented by using a
        modified version of the formula, which includes r as a variable:
      </p>

      <span class="formula">d = r * sqrt(N)</span>

      <p class="normal-text">
        Why don’t you play a bit with the values and see how the formula varies?
      </p>

      <div class="input-wrapper">
        <!-- Use JS to restrict the max possible number -->
        <!-- https://stackoverflow.com/questions/9361193/why-is-input-type-number-maxlength-3-not-working-in-safari -->
        <!-- https://stackoverflow.com/a/8355013 -->
        <div class="input-group">
          <label for="chart-4-n">N:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-4-n"
            min="0"
            max="99999"
            value="50"
            onchange=""
          />
        </div>

        <div class="input-group">
          <label for="chart-4-r">r:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-4-r"
            min="0"
            max="99"
            value="1"
            onchange=""
          />
        </div>

        <div class="input-group">
          <label for="chart-4-w">w:</label>
          <input
            type="number"
            class="walker-variables"
            name="chart-4-w"
            min="1"
            max="999"
            value="10"
            onchange=""
          />
        </div>
      </div>

      <span class="formula" id="dynamic">d = <span id="result"></span></span>

      <button class="simulate-button" onclick="">simulate</button>

      <canvas id="chart-4" class="chart"></canvas>

      <p class="normal-text">
        Cool beans, but what can we do with that? Oh, I’ll show you what... But
        first, since I've promissed you, let's see how the simulation goes with
        a bunch of walkers at the same time:
      </p>

      <button class="reset-button" onclick="">reset</button>

      <div id="simulation-5" class="p5-simulation"></div>

      <h2>a rather <em>average</em> baseball team</h2>

      <p class="normal-text">
        We talked a lot about random walks, but not much about what in the heck
        we can do with them. Now this is the part where I try to convince you
        that modelling random walks can actually be quite useful. The best way
        to do this is with a silly example.
      </p>
      <p class="normal-text">
        To give you a primer, random walks can be used to predict the variations
        of an event that are due to pure chance. This already sounds interesting
        and useful, but wait, there’s more!
      </p>
      <p class="normal-text">
        By comparing a time series with a random walk, for example, you can
        evaluate both distributions and, if you have enough data, understand if
        your distribution deviates significantly from a purely stochastic event.
        What that means is that random walks might be able to tell if a certain
        event in time is actually predictable or so much influenced by chance
        alone (or almost)!
      </p>
      <p class="normal-text">
        It is not hard to see a situation in which that’d be useful: think of a
        better. Our little friend, Mr. Walkerson, is an avid better and believes
        many of his decisions affect his outcomes. He deeply analyzes the games
        he can bet on, the teams’ latest performances and identifiable trends in
        a short time span. He’s not emotionally attached to any team, and he
        even uses a well-trained AI to assist him in his “predictions”.
      </p>
      <p class="normal-text">
        Alright, so let’s say Mr. Walkerson wants to bet on Team Average, a
        pretty... average baseball team. Although the name might be a sign that
        Mr. Walkerson could be wrong in his belief of his prediction abilities,
        it is true that, in the last baseball season, Team Average had an
        outstanding record of 10 consecutive wins! If that’s not a sign, Mr.
        Walkerson doesn’t know what is! But seriously, he doesn’t...
      </p>
      <p class="normal-text">Let me show you why, and then we’ll discuss it.</p>

      <span class="formula">d = 12...</span>

      <canvas id="chart-5" class="chart"></canvas>

      <p class="normal-text">
        Ok so, two questions, one answer: what does the formula and the graph
        above tell us about Team Average’s outstanding win streak and how can we
        use them to prove Mr. Walkerson can’t predict a thing?
      </p>
      <p class="normal-text">
        The answer is simple, but first let’s describe what happened above.
        We’ll assume a standard U.S. baseball league season, which consists of a
        grand total of 162 games for each team. Our stars, Team Average, has a
        50% chance of winning each game and, when it wins, it gets +1 point (or
        takes a step of 1) and, when it loses, it gets -1 point (or takes a step
        of -1). According to our random walk formula, an average team is
        expected to win or lose 12 to 13 games completely by chance. This means
        that, instead of the expected average record of 81 wins, it is just as
        likely that Team Average actually wins 91 games out of a simple random
        variation!
      </p>
      <p class="normal-text">
        What this tells us is that some events are just too hard to predict, and
        it’s not our fault. Randomness plays a bigger role than what we tend to
        believe in those events, which introduces a certain irreducible error,
        resulting in a bunch of noise in our predictions.
      </p>
      <p class="normal-text">
        So, unfortunately for Mr. Walkerson, he and his betting friends are
        better off just throwing a coin to decide in which team to bet on.
      </p>

      <span id="ending-message">
        Bye! Thank you for reading. Don’t walk drunk and don’t believe you can
        predict the outcomes of your bets!
      </span>
    </div>
  </body>
</html>
